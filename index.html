<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Quiz SIPAT GROB â€” Corporativo</title>
    <link rel="icon" type="image/png" href="img/G.png">
</head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />


<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<style>
  body {
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }

  .glass {
    background: rgba(255,255,255,0.06);
    backdrop-filter: blur(8px) saturate(120%);
    -webkit-backdrop-filter: blur(8px) saturate(120%);
    border: 1px solid rgba(255,255,255,0.08);
  }

  /* animaÃ§Ãµes */
  .fade { transition: all .35s cubic-bezier(.2,.9,.2,1); }
  .shake { animation: shake .55s ease; }

  @keyframes shake {
    10%, 90% { transform: translateX(-2px); }
    20%, 80% { transform: translateX(4px); }
    30%, 50%, 70% { transform: translateX(-6px); }
    40%, 60% { transform: translateX(6px); }
  }

  .pulse-scale {
    transform-origin: center;
    animation: pulse-scale .45s ease;
  }

  @keyframes pulse-scale {
    0% { transform: scale(1); }
    50% { transform: scale(1.06); }
    100% { transform: scale(1); }
  }

  .prog-bg {
    background: linear-gradient(90deg,#003b75,#0076c8);
    height: 10px;
    border-radius: 999px;
  }

  /* ranking drawer responsivo */
  #rankingBox {
    width: 18rem;
  }

  @media (max-width: 768px) {
    #rankingBox {
      width: 90%;
      left: 50%;
      transform: translateX(-50%);
      bottom: 1rem;
      padding: 1rem;
    }
  }

  /* main responsivo */
  @media (max-width: 640px) {
    main {
      margin: 0;
      padding: 1rem;
    }
    .max-w-xl {
      margin: 1rem !important;
    }
    header h1 {
      font-size: 1.35rem;
    }
    header p {
      font-size: 0.8rem;
    }
    #avatar { width: 2.5rem; height: 2.5rem; }
    button { font-size: 0.95rem; }
  }
</style>

</head>

<body class="min-h-screen bg-gradient-to-br from-[#03162a] via-[#023b5a] to-[#0b6b3a] flex items-center justify-center p-6">
<div id="rankingBox"
    class="fixed bottom-5 left-5 w-72
           bg-white/10 backdrop-blur-xl
           shadow-xl rounded-xl p-5
           border border-white/20
           text-white">

    <h3 class="text-lg font-bold mb-4 flex items-center gap-2">
        <span class="text-yellow-300 text-xl">ðŸ¥‡</span>
        ClassificaÃ§Ã£o Global
    </h3>

    <ul id="rankingLista"
        class="text-sm space-y-2 max-h-64 overflow-y-auto custom-scrollbar-dark">
    </ul>

    <button onclick="limparRanking()"
        class="mt-4 w-full bg-gradient-to-r from-[#003B75] to-[#0076C8]
               hover:brightness-110 text-white font-semibold py-2.5
               rounded-lg shadow-md transition-all active:scale-95">
        Limpar Ranking
    </button>
</div>

<style>
/* Scrollbar mais escuro combinando com o fundo */
.custom-scrollbar-dark::-webkit-scrollbar {
    width: 6px;
}
.custom-scrollbar-dark::-webkit-scrollbar-thumb {
    background-color: #ffffff; /* azul escuro */
    border-radius: 3px;
}
.custom-scrollbar-dark::-webkit-scrollbar-track {
    background: rgba(255,255,255,0.1);
}
</style>



<!-- MAIN CARD -->
<main class="relative w-full max-w-xl glass rounded-2xl p-6 shadow-2xl mx-auto sm:mx-0">
  <!-- Header: logos + avatar -->
  <header class="flex items-center justify-between mb-6">
    <div class="flex items-center gap-3">
      <!-- GROB Logo (svg hosted) -->
      <img src="img/Gemini_Generated_Image_k3ko3dk3ko3dk3ko-removebg-preview.png" alt="GROB" class="h-10" />

      <div>
        <h1 class="text-white font-extrabold text-2xl leading-tight">Quiz SIPATMA </h1>
        <p class="text-slate-200 text-sm -mt-0.5">Treine a cultura de seguranÃ§a</p>
      </div>
    </div>

    <!-- Avatar / initials -->
    <div id="avatarWrap" class="flex items-center gap-3">
      <div id="avatar" class="w-12 h-12 rounded-full bg-gradient-to-br from-[#003b75] to-[#0076c8] flex items-center justify-center text-white font-bold invisible">
        JD
      </div>
    </div>
  </header>

  <!-- NAME SCREEN -->
  <section id="screenName" class="fade">
    <div class="mb-4">
      <label class="text-slate-200 block mb-2">Seu nome</label>
      <input id="nomeInput" 
       type="text" 
       placeholder="Digite seu nome" 
       class="w-full p-3 rounded-lg bg-white/60 border border-white/20 
              text-black placeholder:text-gray-600" />
    </div>

    <div class="flex gap-3">
      <button onclick="iniciarQuiz()" class="flex-1 py-3 rounded-lg bg-gradient-to-r from-[#003b75] to-[#0076c8] text-white font-semibold shadow hover:scale-[1.01] transition">Entrar no Quiz</button>
    </div>
  </section>

  <!-- QUIZ SCREEN -->
  <section id="screenQuiz" class="hidden fade">
    <!-- top: progress + question index -->
    <div class="flex items-center justify-between mb-4">
      <div class="w-3/4">
        <div class="w-full bg-white/6 rounded-full overflow-hidden">
          <div id="progressBar" class="prog-bg" style="width:0%"></div>
        </div>
        <div class="text-slate-200 text-xs mt-1"><span id="progressText">0%</span> â€¢ Pergunta <span id="indiceText">1</span> / 10</div>
      </div>

      <div class="text-right">
        <div id="timer" class="text-sm text-slate-200">â€”</div>
      </div>
    </div>

    <article id="questionCard" class="p-5 rounded-xl bg-white/4 border border-white/6 shadow-inner mb-4">
      <h2 id="pergunta" class="text-white text-lg font-bold leading-snug"></h2>
      <p id="sub" class="text-slate-200 text-sm mt-2 hidden">Dica: responda com atenÃ§Ã£o</p>
    </article>

    <div id="opcoes" class="space-y-3"></div>

    <div class="mt-5 flex items-center justify-between">
      <div class="text-slate-200 text-sm">Acertos: <span id="scoreText">0</span></div>
    </div>
  </section>

  <!-- RESULT SCREEN -->
  <section id="screenResult" class="hidden fade text-center">
    <div class="py-6">
      <h3 class="text-white text-2xl font-bold mb-2">Resultado final</h3>
      <p id="resultado" class="text-slate-200 mb-4"></p>

      <div class="mb-4">
        <button onclick="reiniciar()" class="px-6 py-3 rounded-lg bg-gradient-to-r from-[#003b75] to-[#0076c8] text-white font-semibold mr-3">Jogar novamente</button>
      </div>

      <div class="text-left">
        <h4 class="text-white font-semibold mb-2">Seu desempenho</h4>
        <div class="bg-white/6 p-4 rounded-lg">
          <div class="flex justify-between text-slate-200"><span>Nome</span><strong id="resNome"></strong></div>
          <div class="flex justify-between text-slate-200 mt-2"><span>PontuaÃ§Ã£o</span><strong id="resScore"></strong></div>
        </div>
      </div>
    </div>
  </section>

</main>

<!-- SCRIPT -->
<script>
/* ---------- DADOS E ESTADO ---------- */
const perguntasBase = [
  {
    q: "Quem Ã© responsÃ¡vel por relatar condiÃ§Ãµes inseguras no local de trabalho?",
    a: ["Apenas a gerÃªncia", "Apenas os funcionÃ¡rios da seguranÃ§a", "Todos os funcionÃ¡rios", "Apenas o departamento de recursos humanos"],
    c: 2
  },
  {
    q: "O que fazer ao identificar uma situaÃ§Ã£o perigosa no seu ambiente de trabalho?",
    a: ["Ignorar e continuar trabalhando", "Relatar imediatamente Ã  gerÃªncia e ao departamento de seguranÃ§a / CIPA", "Esperar atÃ© a conclusÃ£o da atividade para avisar", "Fazer um reparo por conta prÃ³pria"],
    c: 1
  },
  {
    q: "Em que situaÃ§Ãµes utilizamos o kit de contenÃ§Ã£o de produtos quÃ­micos?",
    a: ["Quando houver vazamento de Ã¡gua no setor", "Em emergÃªncias com vazamentos de substÃ¢ncias quÃ­micas perigosas Ã  saÃºde / meio ambiente", "Em caso de vazamento frequente de algum produto quÃ­mico", "Para secar piso molhado"],
    c: 1
  },
  {
    q: "Qual extintor Ã© mais indicado para fogo em equipamentos elÃ©tricos?",
    a: ["PÃ³ quÃ­mico", "Ãgua", "CO2", "Espuma mecÃ¢nica"],
    c: 2
  },
  {
    q: "Qual Ã© o comportamento ideal ao ouvir o alarme de incÃªndio?",
    a: ["Ficar em alerta e aguardar orientaÃ§Ãµes da brigada para possÃ­vel abandono", "Recolher objetos pessoais", "Continuar trabalhando normalmente", "Ligar para o bombeiro"],
    c: 0
  },
  {
    q: "Em emergÃªncias com vÃ­timas nas dependÃªncias da GROB, o que fazer?",
    a: ["Ligar para o SAMU ou bombeiros", "Ligar para o ramal de emergÃªncia informando local, vÃ­timas e o que estÃ¡ sendo feito", "Prestar socorro imediatamente sem acionar ninguÃ©m", "Esperar alguÃ©m tomar alguma aÃ§Ã£o"],
    c: 1
  },
  {
    q: "Qual o prazo para comunicaÃ§Ã£o de um acidente de trabalho?",
    a: ["AtÃ© 1 dia Ãºtil se for externo e imediatamente se ocorrer dentro da empresa", "Quando a vÃ­tima tiver um tempo", "Quando sentir dor no membro lesionado", "AtÃ© uma semana apÃ³s o acidente"],
    c: 0
  },
  {
    q: "Ã‰ permitido utilizar o celular durante o deslocamento?",
    a: ["NÃ£o, sÃ³ parado em local seguro", "Somente em caso de emergÃªncia", "Somente no modo viva voz", "Sim, se o trajeto for curto"],
    c: 0
  },
  {
    q: "Qual Ã© a melhor forma de prevenir lesÃµes por movimentos repetitivos, como tendinite?",
    a: ["Trabalhar mais horas sem pausas", "Usar mobiliÃ¡rio ergonÃ´mico e fazer pausas regulares", "Aumentar a velocidade das tarefas", "Ignorar sinais de desconforto"],
    c: 1
  },
  {
    q: "Por que funcionÃ¡rios devem relatar incidentes de seguranÃ§a mesmo sem feridos?",
    a: ["Para evitar puniÃ§Ãµes", "Para identificar e corrigir perigos antes que causem acidentes", "Para aumentar o tempo de trabalho", "Para ignorar problemas menores"],
    c: 1
  },
  {
    q: "Qual Ã© a principal causa de acidentes por escorregÃµes e quedas no trabalho?",
    a: ["SuperfÃ­cies secas e limpas", "Pavimentos molhados ou com resÃ­duos", "IluminaÃ§Ã£o excessiva", "Temperaturas elevadas"],
    c: 1
  },
  {
    q: "O que significa â€˜bloqueio e etiquetagemâ€™ em seguranÃ§a industrial?",
    a: ["Decorar mÃ¡quinas com etiquetas", "Desligar e bloquear equipamentos para manutenÃ§Ã£o segura", "Aumentar a velocidade das mÃ¡quinas", "Ignorar equipamentos defeituosos"],
    c: 1
  },
  {
    q: "Sobre o uso de adornos (alianÃ§as, anÃ©is, brincos, colares, relÃ³gios) em Ã¡reas operacionais:",
    a: ["Devo usar para nÃ£o perder em casa", "NÃ£o devo usar, pois oferece riscos Ã  seguranÃ§a", "Se a luva cobrir, posso usar", "Com protetor auditivo tipo concha posso usar brincos"],
    c: 1
  },
  {
    q: "Qual documento Ã© necessÃ¡rio para que um EPI seja aprovado para uso?",
    a: ["LicenÃ§a de Funcionamento (LF)", "Certificado de Registro (CR)", "Certificado de AprovaÃ§Ã£o (CA)", "DeclaraÃ§Ã£o de Conformidade (DC)"],
    c: 2
  },
  {
    q: "Em que situaÃ§Ãµes Ã© permitido o uso de fones de ouvido dentro da empresa?",
    a: ["Durante o horÃ¡rio de almoÃ§o", "Para estudar", "Para ouvir mÃºsica enquanto trabalha", "NÃ£o Ã© permitido o uso de fones"],
    c: 3
  },
  {
    q: "Qual o ramal de emergÃªncia da GROB?",
    a: ["0966", "9666", "6966", "9466"],
    c: 1
  },
  {
    q: "O que significa a sigla SIPATMA?",
    a: ["SeminÃ¡rio de InformaÃ§Ã£o para aÃ§Ã£o de trabalho e meio ambiente", "Semana de interaÃ§Ã£o de proteÃ§Ã£o ambiental e trabalho de melhorias", "Semana interna de prevenÃ§Ã£o de acidentes no trabalho e meio ambiente", "SeminÃ¡rio de interaÃ§Ã£o de prevenÃ§Ã£o de acidentes do trabalho e meio ambiente"],
    c: 2
  },
];


// Gera 10 perguntas random (podem repetir itens do base)
// Embaralha todas as 17 perguntas
const perguntasEmbaralhadas = [...perguntasBase]
  .sort(() => Math.random() - 0.5);

// Seleciona apenas as 10 primeiras, sem repetiÃ§Ã£o
let perguntas = perguntasEmbaralhadas.slice(0, 10);


let indice = 0;
let score = 0;
let nome = "";
let tempoPorPergunta = 0; // nÃ£o usado agora (placeholder)

/* ---------- ELEMENTOS ---------- */
const screenName = document.getElementById('screenName');
const screenQuiz = document.getElementById('screenQuiz');
const screenResult = document.getElementById('screenResult');
const avatarEl = document.getElementById('avatar');
const avatarWrap = document.getElementById('avatarWrap');
const perguntaEl = document.getElementById('pergunta');
const opcoesEl = document.getElementById('opcoes');
const progressBar = document.getElementById('progressBar');
const progressText = document.getElementById('progressText');
const indiceText = document.getElementById('indiceText');
const scoreText = document.getElementById('scoreText');
const resultadoNome = document.getElementById('resNome');
const resultadoScore = document.getElementById('resScore');

/* ---------- FUNÃ‡Ã•ES UI ---------- */
function iniciarQuiz() {
  nome = document.getElementById('nomeInput').value.trim();
  if (!nome) { alert('Por favor digite seu nome.'); return; }

  // avatar iniciais
  const iniciais = nome.split(' ').map(s=>s[0]).slice(0,2).join('').toUpperCase();
  avatarEl.textContent = iniciais;
  avatarEl.classList.remove('invisible');

  // tela
  screenName.classList.add('hidden');
  screenQuiz.classList.remove('hidden');

  indice = 0;
  score = 0;
  atualizarScore();
  carregarPergunta();
  exibirRanking(); // atualiza drawer
}

function carregarPergunta() {
  const p = perguntas[indice];
  perguntaEl.textContent = p.q;
  indiceText.textContent = (indice + 1);
  progressBar.style.width = `${Math.round((indice/10) * 100)}%`;
  progressText.textContent = `${Math.round((indice/10)*100)}%`;

  // limpa opcoes
  opcoesEl.innerHTML = '';
  p.a.forEach((opc, i) => {
    const btn = document.createElement('button');
    btn.className = 'w-full text-left p-3 rounded-lg bg-white/6 text-white hover:bg-white/8 transition flex items-center gap-3 border border-white/6';
    btn.innerHTML = `<span class="flex-1">${opc}</span><span class="text-xs text-slate-300">Selecionar</span>`;
    btn.onclick = () => verificarResposta(i, btn);
    btn.onkeydown = (e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); verificarResposta(i, btn); } };
    opcoesEl.appendChild(btn);
  });
}

function verificarResposta(i, btn) {
  const correta = perguntas[indice].c;
  // desabilita todas
  const botoes = opcoesEl.querySelectorAll('button');
  botoes.forEach(b => b.disabled = true);

  if (i === correta) {
    score++;
    atualizarScore();
    // efeito positivo
    btn.classList.add('pulse-scale');
    btn.classList.add('bg-gradient-to-r','from-green-500','to-green-600','text-white');
    setTimeout(()=> btn.classList.remove('pulse-scale'), 450);
  } else {
    // efeito negativo
    btn.classList.add('shake','bg-red-600','text-white');
    // realÃ§ar a correta
    setTimeout(()=> {
      // encontra e colore correta
      botoes.forEach((b, idx) => {
        if (idx === correta) b.classList.add('bg-green-500','text-white');
      });
    }, 120);
  }

  // avanÃ§a
  setTimeout(()=> {
    indice++;
    if (indice < 10) {
      carregarPergunta();
    } else {
      mostrarResultado();
    }
  }, 850);
}

function atualizarScore() {
  scoreText.textContent = score;
}

function mostrarResultado() {
  screenQuiz.classList.add('hidden');
  screenResult.classList.remove('hidden');

  document.getElementById('resultado').textContent = `${nome}, vocÃª acertou ${score} de 10!`;
  resultadoNome.textContent = nome;
  resultadoScore.textContent = `${score}/10`;

  salvarRanking();
  exibirRanking();
}

// --- SALVAR NO LOCALSTORAGE ---
function salvarRanking() {
  let ranking = JSON.parse(localStorage.getItem("ranking_grob")) || [];

  ranking.push({ nome, score });
  ranking.sort((a, b) => b.score - a.score);

  localStorage.setItem("ranking_grob", JSON.stringify(ranking));
  exibirRanking();
}

// --- EXIBIR NO QUADRO FIXO ---
function exibirRanking() {
  let ranking = JSON.parse(localStorage.getItem("ranking_grob")) || [];

  const lista = document.getElementById("rankingLista");
  lista.innerHTML = "";

  ranking.slice(0, 10).forEach((item, i) => {
    const li = document.createElement("li");
    li.innerHTML = `<strong>${i+1}Âº</strong> â€” ${item.nome} <span class="text-white font-semibold">${item.score}/10</span>`;
    lista.appendChild(li);
  });
}

// --- LIMPAR RANKING ---
function limparRanking() {
  localStorage.removeItem("ranking_grob");
  exibirRanking();
}


/* ---------- AÃ‡Ã•ES ADICIONAIS ---------- */
function reiniciar() {
  // simples reload para simplificar
  location.reload();
}

function abrirRanking() {
  document.getElementById('drawer').classList.remove('drawer-closed');
  document.getElementById('drawer').classList.add('drawer-open');
}

function toggleDrawer() {
  const drawer = document.getElementById('drawer');
  if (!drawer) return console.warn('Drawer nÃ£o encontrado');

  const isOpen = drawer.classList.contains('drawer-open');

  // garante estado limpo antes de trocar
  drawer.classList.remove('drawer-open', 'drawer-closed');

  if (isOpen) {
    drawer.classList.add('drawer-closed');
  } else {
    drawer.classList.add('drawer-open');
    exibirRanking(); // atualiza ranking ao abrir
  }
}




/* Inicial */
exibirRanking();

/* Accessibility: permitir Enter no input para iniciar */
document.getElementById('nomeInput').addEventListener('keydown', function(e){
  if (e.key === 'Enter') iniciarQuiz();
});
</script>
</body>
</html>
